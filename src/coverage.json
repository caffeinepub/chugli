{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-07T10:06:18.919Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 6,
    "implemented": 2,
    "items": [
      {
        "id": "REQ-1",
        "summary": "Implement an owner/admin permission model tied to Internet Identity so that only the app owner (admin) can perform destructive moderation actions (delete rooms, delete messages, ban/unban users). The first authenticated principal to initialize the canister should become the immutable owner/admin (unless an owner/admin already exists in state).",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-2",
        "summary": "Add backend support for global bans enforced by principal: store a persistent list of banned principals and prevent banned principals from creating rooms and sending messages.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-3",
        "summary": "Add admin-only backend methods to delete a room and delete a message. Deleting a room must remove the room and its associated message list (and any associated room-scoped reports, if stored by room key). Deleting a message must remove it from the room’s message list by message ID.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-4",
        "summary": "Extend the backend Message model so each message includes the sender’s Principal (in addition to the existing display sender Text), so the frontend can target the correct identity for admin actions like ban. Add conditional state migration to preserve existing stored messages by backfilling senderPrincipal for old messages.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-5",
        "summary": "Add frontend admin-gated UI controls: when the logged-in user is admin, show options to (1) delete a message and (2) ban/unban the message sender within the per-message actions menu; and show an option to delete a room from the room/chat UI. These controls must not be visible to non-admin users.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/chat/MessageActionsMenu.tsx",
          "frontend/src/components/chat/MessageList.tsx",
          "frontend/src/pages/ChatPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/chat/MessageActionsMenu.tsx",
          "frontend/src/components/chat/MessageList.tsx",
          "frontend/src/pages/ChatPage.tsx"
        ]
      },
      {
        "id": "REQ-6",
        "summary": "Add React Query hooks/mutations for the new backend admin endpoints (isAdmin query, deleteRoom, deleteMessage, banUser, unbanUser) and ensure relevant cached queries are invalidated so the UI updates immediately (rooms list, messages list).",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useQueries.ts"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useQueries.ts"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "backend/migration.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/components/chat/MessageActionsMenu.tsx",
    "frontend/src/components/chat/MessageList.tsx",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/ChatPage.tsx",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}